#!/usr/bin/env php
<?php

use SensioLabs\Deptrac\Console\Application;
use Symfony\Component\Console\Input\ArgvInput;

$autoloaderInWorkingDirectory = getcwd() . '/vendor/autoload.php';
if (is_file($autoloaderInWorkingDirectory)) {
    require_once $autoloaderInWorkingDirectory;
}

$composerAutoloadFile = __DIR__ . '/../vendor/autoload.php';
if (!is_file($composerAutoloadFile)) {
    $composerAutoloadFile = __DIR__ . '/../../../autoload.php';
}

require_once $composerAutoloadFile;

if (PHP_VERSION_ID < 70100) {
    echo 'Required at least PHP version 7.1.0, your version: '.PHP_VERSION."\n";
    exit(1);
}

$input = new ArgvInput();
$cache = !$input->hasParameterOption('--no-cache', true);

(new Application($cache))->run($input);
