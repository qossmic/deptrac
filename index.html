
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Deptrac: keep your architecture clean">
      
      
      
        <link rel="canonical" href="https://qossmic.github.io/deptrac/">
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Deptrac</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.2505c338.min.css">
        
          
          
          <meta name="theme-color" content="#4051b5">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="blue">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#what-is-deptrac" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Deptrac" class="md-header__button md-logo" aria-label="Deptrac" data-md-component="logo">
      
  <img src="qossmic.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Deptrac
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Home
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/qossmic/deptrac" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    qossmic/deptrac
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  


  <li class="md-tabs__item">
    <a href="." class="md-tabs__link md-tabs__link--active">
      Home
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="bc_policy/" class="md-tabs__link">
      Backwards Compatibility
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="upgrade/" class="md-tabs__link">
      Upgrade Guide
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="concepts/" class="md-tabs__link">
      Concepts
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="configuration/" class="md-tabs__link">
      Configuration
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="collectors/" class="md-tabs__link">
      Collectors
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="formatters/" class="md-tabs__link">
      Formatters
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="debugging/" class="md-tabs__link">
      Debugging
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="CODE_OF_CONDUCT/" class="md-tabs__link">
      Code of Conduct
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="CONTRIBUTING/" class="md-tabs__link">
      Contributing
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="SECURITY/" class="md-tabs__link">
      Security
    </a>
  </li>

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Deptrac" class="md-nav__button md-logo" aria-label="Deptrac" data-md-component="logo">
      
  <img src="qossmic.png" alt="logo">

    </a>
    Deptrac
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/qossmic/deptrac" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    qossmic/deptrac
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Home
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        Home
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-deptrac" class="md-nav__link">
    What is Deptrac?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
    <nav class="md-nav" aria-label="Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#phar" class="md-nav__link">
    PHAR
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#phive" class="md-nav__link">
    PHIVE
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#composer" class="md-nav__link">
    Composer
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-dependency-graphviz" class="md-nav__link">
    Optional Dependency: Graphviz
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    Getting Started
  </a>
  
    <nav class="md-nav" aria-label="Getting Started">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    Configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#run-deptrac" class="md-nav__link">
    Run Deptrac
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contribute" class="md-nav__link">
    Contribute
  </a>
  
    <nav class="md-nav" aria-label="Contribute">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#code-of-conduct" class="md-nav__link">
    Code of Conduct
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#further-documentation" class="md-nav__link">
    Further Documentation
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="bc_policy/" class="md-nav__link">
        Backwards Compatibility
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="upgrade/" class="md-nav__link">
        Upgrade Guide
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="concepts/" class="md-nav__link">
        Concepts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="configuration/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="collectors/" class="md-nav__link">
        Collectors
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="formatters/" class="md-nav__link">
        Formatters
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="debugging/" class="md-nav__link">
        Debugging
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="CODE_OF_CONDUCT/" class="md-nav__link">
        Code of Conduct
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="CONTRIBUTING/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="SECURITY/" class="md-nav__link">
        Security
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Home</h1>

<h2 id="what-is-deptrac">What is Deptrac?</h2>
<p>Deptrac is a static code analysis tool for PHP that helps you communicate,
visualize and enforce architectural decisions in your projects. You can freely
define your architectural layers over classes and which rules should apply to
them.</p>
<p>For example, you can use Deptrac to ensure that bundles/modules/extensions in
your project are truly independent of each other to make them easier to reuse.</p>
<p>Deptrac can be used in a CI pipeline to make sure a pull request does not
violate any of the architectural rules you defined. With the optional Graphviz
formatter you can visualize your layers, rules and violations.</p>
<p><img alt="Example: Deptrac analyses Deptrac" src="deptrac.png" /></p>
<h2 id="requirements">Requirements</h2>
<p>In order to run Deptrac you need at least PHP 8.1.</p>
<p>You can analyse projects that require an older PHP version as long as
<a href="https://github.com/nikic/PHP-Parser">nikic/php-parser</a> can parse it.</p>
<h2 id="installation">Installation</h2>
<p>While you can install Deptrac using composer, we recommend using either the phar
installation or PHIVE. This will ensure that Deptrac and its dependencies are
bundled together and will not interfere with any of your project's dependencies.</p>
<h3 id="phar">PHAR</h3>
<p>Download the latest <a href="https://github.com/qossmic/deptrac/releases">deptrac.phar</a>.</p>
<p>You can run the phar file using php:</p>
<pre><code>php deptrac.phar analyse
</code></pre>
<p>All examples in this documentation, assume you have the deptrac.phar downloaded
in your project's root directory as described above.</p>
<p>Feel free to add Deptrac to your PATH (i.e. <code>/usr/local/bin/deptrac</code>) to make it
globally available.</p>
<pre><code class="language-bash">curl -LS https://github.com/qossmic/deptrac/releases/download/1.0.2/deptrac.phar -o deptrac.phar

# optional
sudo chmod +x deptrac.phar
sudo mv deptrac.phar /usr/local/bin/deptrac
</code></pre>
<h3 id="phive">PHIVE</h3>
<p>You can install Deptrac with <a href="https://phar.io/#Install">Phive</a></p>
<p><code>phive install -g qossmic/deptrac</code></p>
<p>and accept the key with fingerprint
<code>41DD E075 4745 9FAE CFA1  7813 B8F6 4013 4AB1 782E</code>.</p>
<p>To upgrade Deptrac use the following command:</p>
<p><code>phive update -g qossmic/deptrac</code></p>
<h3 id="composer">Composer</h3>
<p>We do not recommend installing this repository via Composer. Instead, please use
the dedicated distribution repository https://github.com/qossmic/deptrac-shim.</p>
<p>When you install Deptrac using the qossmic/deptrac-shim package, you will get
the benefit of using the phar installation, but you can use it like any other
composer dependency, i.e. you run Deptrac like this:</p>
<pre><code>composer require qossmic/deptrac-shim
php vendor/bin/deptrac analyse
</code></pre>
<h3 id="optional-dependency-graphviz">Optional Dependency: Graphviz</h3>
<p>If you want to create graphical diagrams with your class dependencies, you will
also need the <code>dot</code> command provided by <a href="http://www.graphviz.org/">Graphviz</a>.</p>
<p>Graphviz can be installed using common package managers:</p>
<pre><code class="language-bash"># for macos + brew
brew install graphviz

# for ubuntu and debian
sudo apt-get install graphviz
</code></pre>
<p>Graphviz is also available for
<a href="https://graphviz.gitlab.io/_pages/Download/Download_windows.html">Windows</a>.
Install the current stable release and append the binary path on the environment
variable Path (e.g. <code>C:\Program Files (x86)\Graphviz2.38\bin</code>).</p>
<h2 id="getting-started">Getting Started</h2>
<p>In order to get started with Deptrac you will need a configuration file.
This configuration file is written in YAML and, by default, is stored with the
name <code>deptrac.yaml</code> in your project's root directory.</p>
<p>Deptrac can generate a template for you, using the <code>init</code> command.</p>
<pre><code class="language-bash">php deptrac.phar init
</code></pre>
<p>The main purpose of this file is:</p>
<ol>
<li>Define in which directories Deptrac will search for classes and which files
   to exclude.</li>
<li>Define your architectural layers using so-called collectors.</li>
<li>Define a ruleset describing which layers can communicate with each other.</li>
</ol>
<p>You can find out more about the <a href="concepts/">Core Concepts</a> in the docs.</p>
<h3 id="configuration">Configuration</h3>
<p>Let's have a look at the generated file:</p>
<pre><code class="language-yaml"># deptrac.yaml
deptrac:
  paths:
    - ./src
  exclude_files:
    - '#.*test.*#'
  layers:
    -
      name: Controller
      collectors:
        -
          type: className
          value: .*Controller.*
    -
      name: Repository
      collectors:
        -
          type: className
          value: .*Repository.*
    -
      name: Service
      collectors:
        -
          type: className
          value: .*Service.*
  ruleset:
    Controller:
      - Service
    Service:
      - Repository
    Repository: ~
</code></pre>
<p>By default, Deptrac will search your project's <code>src/</code> directory for classes and
will ignore any files and directory having <code>test</code> in it.</p>
<p>We then define three layers by searching for class names in the files found by
Deptrac. Any file containing a class with <code>Controller</code> will be grouped in a
layer with the same name. The same happens for classes having <code>Repository</code> and
<code>Service</code> in their name. It is important to note that the fully qualified class
name is used for grouping classes. That means, the collector will take the full
namespace with class name into account.</p>
<p>The default ruleset will then allow classes in the Controller-layer to
communicate - i.e. use classes from - the Service layer. Classes grouped in the
Service layer may not use classes from the Controller layer, but they can use
classes from the Repository layer. Classes inside the Repository layer may not
use any classes from the other two layers.</p>
<p>You can learn more about the file in the <a href="configuration/">Configuration reference</a>.</p>
<h2 id="run-deptrac">Run Deptrac</h2>
<p>Once you have set up the config file you can run Deptrac to analyse your code
and check for violations. If you use the default configuration file, you can
type <code>php deptrac.phar</code>, otherwise you will need to specify which command and
config file should be used.</p>
<pre><code class="language-bash">php deptrac.phar

# which is equivalent to
php deptrac.phar analyse --config-file=deptrac.yaml
</code></pre>
<p>If you run <code>php deptrac.phar -v</code> you'll get a more verbose output.</p>
<p>The analyse command runs with a caching mechanism for parsed files by default.
This can be disabled with the <code>--no-cache</code> option.</p>
<p>The generated output will roughly look like this:</p>
<pre><code class="language-bash"> ----------- --------------------------------------------------------------------------------------------------------------------------------
  Reason      Repository
 ----------- --------------------------------------------------------------------------------------------------------------------------------
  Violation   examples\MyNamespace\Repository\SomeRepository must not depend on examples\MyNamespace\Controllers\SomeController (Controller)
              /Users/dbr/workspace/qossmic/deptrac/examples/ControllerServiceRepository1/SomeRepository.php:5
 ----------- --------------------------------------------------------------------------------------------------------------------------------


 -------------------- -----
  Report
 -------------------- -----
  Violations           1
  Skipped violations   0
  Uncovered            0
  Allowed              4
  Warnings             0
  Errors               0
 -------------------- -----
</code></pre>
<p>This is a report generated by Deptrac. At the top you can see a list of
violations, if there are any. A violation means, that a layer uses a layer that
is prohibited by the configured ruleset. In this case, a class from the
Repository layer uses a class from the Controller layer.</p>
<p>The table on the bottom gives you an overview over:</p>
<ul>
<li>how many violations were found.</li>
<li>how many violations were skipped, meaning your config contains exceptions.
  which will not cause Deptrac to return with an error status code, e.g. in CI,
  when these violations are found.</li>
<li>how many classes were found in the directories, that were not assigned to a
  layer.</li>
<li>how many usages between layers were found that do not violate the ruleset.</li>
<li>how many warnings where encountered, e.g. because a class is grouped in
  multiple layers.</li>
<li>how many errors were encountered, e.g. when you exclude a violation in your
  config file but that violation is not encountered.</li>
</ul>
<p>If the output does not match your expectations please take a look at
<a href="debugging/">the debugging commands</a> available in Deptrac.</p>
<p>You can also change the output format itself by using one of the many provided
<a href="formatters/">Output Formatters</a>.</p>
<h2 id="contribute">Contribute</h2>
<p>Deptrac is in active development. We are looking for your suggestions and help
to make it better.</p>
<p>Feel free to <strong>open an issue</strong> if you encounter bugs, have suggestions or
would like to add a new feature to Deptrac.</p>
<p>Please feel free to improve this documentation, fix bugs, or work on a suggested
feature by making a pull request on GitHub. Don't hesitate to ask for support,
if you need help at any point.</p>
<p>The <a href="CONTRIBUTING/">Contribution Guide</a> in the documentation contains
some advice for making a pull request with code changes.</p>
<h3 id="code-of-conduct">Code of Conduct</h3>
<p>If you are <strong>professional</strong> and <strong>polite</strong> then everything will be alright.</p>
<p>Please don't be inconsiderate or mean, or anything in between.</p>
<h2 id="further-documentation">Further Documentation</h2>
<ul>
<li><a href="bc_policy/">Backwards Compatibility</a> - General info on how we approach
  backwards compatibility</li>
<li><a href="upgrade/">Upgrade Guide</a> - List of backwards breaking changes that need to
  be addressed when upgrading Deptrac to a new version and how to do it.</li>
<li><a href="concepts/">Core Concepts</a> - Explains layers, rules and violations in
  more details.</li>
<li><a href="configuration/">Configuration</a> - Reference for all available settings in a
  config file</li>
<li><a href="collectors/">Collectors</a> - Reference for which collectors are
  available in Deptrac to define your layers.</li>
<li><a href="formatters/">Formatters</a> - Lists the different output formats
  supported by Deptrac</li>
<li><a href="debugging/">Debugging</a> - Overview of the debug commands</li>
<li><a href="CODE_OF_CONDUCT/">Code Of Conduct</a> - Our community standards</li>
<li><a href="CONTRIBUTING/">Contribute</a> - Advice for contributing code changes,
  e.g. how to run tests or how to build a phar file with your changes that you
  can use to analyse your projects</li>
<li><a href="SECURITY/">Security Guide</a> - How to report security vulnerabilities</li>
</ul>





                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
      
        
        <a href="bc_policy/" class="md-footer__link md-footer__link--next" aria-label="Next: Backwards Compatibility" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Backwards Compatibility
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.top", "toc.integrate"], "search": "assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>