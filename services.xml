<?xml version="1.0" encoding="UTF-8" ?>
<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <services>

        <service id="dispatcher" class="Symfony\Component\EventDispatcher\EventDispatcher"/>

        <service id="configuration_loader" class="DependencyTracker\ConfigurationLoader"/>

        <service id="ast_map_generator" class="DependencyTracker\AstMapGenerator">
            <argument type="service" id="dispatcher"/>
        </service>

        <service id="output_formatter_factory" class="DependencyTracker\OutputFormatterFactory">
            <argument/>
        </service>

        <service id="output_formatter_graphviz" class="DependencyTracker\OutputFormatter\GraphVizOutputFormatter">
            <tag name="output_formatter"/>
        </service>

        <service id="command_init" class="DependencyTracker\Command\InitCommand">
            <argument type="service" id="configuration_loader"/>
        </service>

        <service id="ruleset_engine" class="DependencyTracker\RulesetEngine"/>

        <service id="collector_factory" class="DependencyTracker\CollectorFactory">
            <argument/>
        </service>

        <service id="collector_className" class="DependencyTracker\Collector\ClassNameCollector">
            <tag name="collector"/>
        </service>

        <service id="command_analyze" class="DependencyTracker\Command\AnalyzeCommand">
            <argument type="service" id="dispatcher"/>
            <argument type="service" id="ast_map_generator"/>
            <argument type="service" id="configuration_loader"/>
            <argument type="service" id="output_formatter_factory"/>
            <argument type="service" id="ruleset_engine"/>
            <argument type="service" id="collector_factory"/>
        </service>

    </services>
</container>